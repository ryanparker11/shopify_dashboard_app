# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

name = "lodestar-analytics"
client_id = "68c92aac9cf4898ec8cdc8ce87814cf1"
application_url = "https://app.lodestaranalytics.io"
embedded = true

[build]
automatically_update_urls_on_dev = true
dev_store_url = "test-auth-1-2.myshopify.com"

[access_scopes]
# Use the scopes your app requires
scopes = "read_products,read_orders,read_customers"

[auth]
redirect_urls = [
  "https://api.lodestaranalytics.io/auth/callback",
  "https://api.lodestaranalytics.io/auth/top"
]

[webhooks]
api_version = "2025-10"

# GDPR Compliance Webhooks (MANDATORY)
# These three webhooks are required for all apps in the Shopify App Store
[[webhooks.subscriptions]]
topics = ["customers/data_request"]
uri = "https://api.lodestaranalytics.io/webhooks/customers/data_request"

[[webhooks.subscriptions]]
topics = ["customers/redact"]
uri = "https://api.lodestaranalytics.io/webhooks/customers/redact"

[[webhooks.subscriptions]]
topics = ["shop/redact"]
uri = "https://api.lodestaranalytics.io/webhooks/shop/redact"

# Optional: Regular webhooks (can also be registered programmatically)
[[webhooks.subscriptions]]
topics = ["orders/create"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[[webhooks.subscriptions]]
topics = ["orders/updated"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[[webhooks.subscriptions]]
topics = ["products/create"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[[webhooks.subscriptions]]
topics = ["products/update"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[[webhooks.subscriptions]]
topics = ["customers/create"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[[webhooks.subscriptions]]
topics = ["customers/update"]
uri = "https://api.lodestaranalytics.io/webhooks/ingest"

[pos]
embedded = false